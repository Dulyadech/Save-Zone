<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- link homepage -->
    <link rel="stylesheet" href="../static/css/style.css">
    <!-- link nav bar -->
    <link rel="stylesheet" href="../static/css/navbar.css">
    <!-- import remix icon package -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon/fonts/remixicon.css" rel="stylesheet">
    <!-- import ion icon package -->
    <script type="module" src="https://unpkg.com/ionicons@latest/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@latest/dist/ionicons/ionicons.js"></script>
    <title>Save Zone</title>
</head>

<body>
    <!-- nav bar -->
    <nav>
        <!-- save zone small logo -->
        <a href="{{ url_for('views.home') }}" class="logo-container">
            <div class="logo">Save Zone</div>
            <ion-icon name="musical-note-outline"></ion-icon>
        </a>
        <!-- ul=unordered list â†’ tag for create list in disorder -->
        <!--li=list item -->
        <!--a=anchor-->
        <ul>
            <!-- upload menu -->
            <li><a href="{{ url_for('views.upload') }}">Upload</a></li>
            <!-- create menu -->
            <li><a href="{{ url_for('views.create') }}">Create</a></li>
            <!-- preview menu -->
            <li><a href="{{ url_for('views.previews') }}">Preview & Edit</a></li>
            <!-- about us menu -->
            <li><a href="{{ url_for('views.about') }}">About us</a></li>
            
            {% if current_user.is_authenticated %}
            <li class="user-menu">
                <a href="{{ url_for('auth.profile') }}">
                    <ion-icon name="person-circle"></ion-icon>
                    <span class="username">{{ current_user.username }}</span>
                </a>
                <div class="dropdown-menu">
                    <a href="{{ url_for('auth.profile') }}">Profile</a>
                    {% if current_user.is_admin %}
                    <a href="{{ url_for('auth.admin') }}">Admin</a>
                    {% endif %}
                    <a href="{{ url_for('auth.logout') }}">Logout</a>
                </div>
            </li>
            {% else %}
            <li><a href="{{ url_for('auth.login') }}" class="auth-link"><ion-icon name="person-circle-outline"></ion-icon></a></li>
            {% endif %}
        </ul>
    </nav>
    <!-- elements -->
    <div class="elements">
        <!-- background -->
        <div class="circle purple"></div>
        <div class="circle pink"></div>
        <!-- save zone big logo -->
        <div class="big_logo"><img src="../static/images/save zone.png" alt="Big Logo"></div>
    </div>


    <div class="button">
        <!-- upload button -->
        <a href="{{ url_for('views.upload') }}" button class="Upload">
            <p>Upload</p>
            <ion-icon name="arrow-up-outline" class="Upload-icon"></ion-icon>
        </a>
        <!-- Or text between button -->
        <span class="Or">
            <p>or</p>
        </span>
        <!-- create button -->
        <a href="{{ url_for('views.create') }}" button class="Create">
            <p>Create</p><ion-icon name="add-outline" class="Create-icon"></ion-icon>
        </a>
    </div>

    <section>
    </section>

    <!-- Flash messages container -->
    <div class="flash-messages">
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
            <div class="alert alert-{{ category }}" role="alert">
                {{ message }}
                <button type="button" class="close-alert">&times;</button>
            </div>
            {% endfor %}
        {% endif %}
        {% endwith %}
    </div>

    <!-- link JavaScript files -->
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    <script src="{{ url_for('static', filename='js/main-auth.js') }}"></script>
    <script>
        // Close flash messages
        document.querySelectorAll('.close-alert').forEach(btn => {
            btn.addEventListener('click', function() {
                this.parentNode.style.display = 'none';
            });
        });
        
        // Auto-hide flash messages after 5 seconds
        setTimeout(function() {
            document.querySelectorAll('.alert').forEach(alert => {
                alert.style.opacity = '0';
                setTimeout(function() {
                    alert.style.display = 'none';
                }, 500);
            });
        }, 5000);
    </script>
</body>

</html>